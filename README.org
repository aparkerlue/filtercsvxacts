# -*- mode: org; -*-
#+TITLE: filtercsvxacts

+Filter CSV transactions that are not present in a repository.+

+This command accepts a CSV file of financial transactions and prints
records that are not found in a repository of CSV files.+

This project is in development.  Right now it parses [[https://datatracker.ietf.org/doc/html/rfc4180][RFC 4180]] CSV
files and prints their contents.  It tolerates [[https://en.wikipedia.org/wiki/Newline][LF]] alone as a record
separator, recognizes quoted substrings within fields, and assumes
that the CSV document includes a header.  For example, using [[https://github.com/commercialhaskell/stack/][Stack]]:
#+begin_example
$ stack run <(cat <<EOF
№,Name
1,Foxy Badger
2,"""Dreary"" Hog"
3,"Furry
 Walrus"
4,Absent "Owl, Esq."
EOF

           )
№|Name
1|Foxy Badger
2|"Dreary" Hog
3|Furry
 Walrus
4|Absent Owl, Esq.

Processed 4 records.
#+end_example
You can run the foregoing example in [[https://www.gnu.org/software/bash/][Bash]]:
#+begin_src bash
stack run <(cat <<EOF
№,Name
1,Foxy Badger
2,"""Dreary"" Hog"
3,"Furry
 Walrus"
4,Absent "Owl, Esq."
EOF
           )
#+end_src
Or in [[https://fishshell.com/][fish]]:
#+begin_src fish
stack run (echo -n '
№,Name
1,Foxy Badger
2,"""Dreary"" Hog"
3,"Furry
 Walrus"
4,Absent "Owl, Esq."
' | tail -n +2 | psub)
#+end_src
